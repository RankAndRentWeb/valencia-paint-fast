---
import Layout from '../layouts/Layout.astro';

const url = "https://pintores-valencia.com/presupuesto";
const title = "Presupuesto gratuito | Pintores en Valencia | Sin compromiso";
const description = "Solicita tu presupuesto gratuito de pintura en Valencia. Respuesta en 24h. Visita sin compromiso. ☎️ 722 208 131";
const ogImage = "https://pintores-valencia.com/presupuesto-pintura-valencia.jpg";

const presupuestoSchema = [
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Presupuesto gratuito - Pintores en Valencia",
    "description": "Formulario para solicitar presupuesto gratuito de servicios de pintura",
    "url": "https://pintores-valencia.com/presupuesto",
    "mainEntity": {
      "@type": "LocalBusiness",
      "name": "Pintores en Valencia",
      "telephone": "+34722208131",
      "email": "edgarberriojimenez@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Valencia",
        "addressCountry": "ES"
      },
      "priceRange": "€€",
      "openingHours": ["Mo-Sa 08:00-20:00"]
    }
  }
];
---

<Layout 
  title={title}
  description={description}
  canonicalUrl={url}
  ogImage={ogImage}
  schema={presupuestoSchema}
>
  <div class="container mx-auto px-4">
    <!-- Breadcrumbs -->
    <nav class="flex" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-3 py-4">
        <li class="inline-flex items-center">
          <a href="/" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600">
            <svg class="w-3 h-3 me-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
            </svg>
            Inicio
          </a>
        </li>
        <li>
          <div class="flex items-center">
            <svg class="w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
            </svg>
            <span class="ms-1 text-sm font-medium text-gray-500 md:ms-2">Presupuesto</span>
          </div>
        </li>
      </ol>
    </nav>

    <div class="py-12">
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">Presupuesto gratuito y sin compromiso</h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
          Recibe tu presupuesto personalizado en menos de 24 horas. Rellena el formulario con los detalles de tu proyecto.
        </p>

        <!-- Beneficios -->
        <div class="flex flex-wrap justify-center gap-6 mb-8" role="list">
          <div class="flex items-center space-x-2" role="listitem">
            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span class="text-sm font-medium">100% gratuito</span>
          </div>
          <div class="flex items-center space-x-2" role="listitem">
            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span class="text-sm font-medium">Respuesta en 24h</span>
          </div>
          <div class="flex items-center space-x-2" role="listitem">
            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span class="text-sm font-medium">Sin compromiso</span>
          </div>
        </div>
      </div>

      <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-lg shadow-lg border border-gray-200">
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-center">Formulario de presupuesto</h2>
            <p class="text-center text-gray-600 mt-1">
              Cuanta más información nos proporciones, más preciso será el presupuesto
            </p>
          </div>
          <div class="p-6">
            <form id="presupuestoForm" class="space-y-6">
              <!-- Datos personales -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                  <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre completo *</label>
                  <input
                    id="nombre"
                    name="nombre"
                    type="text"
                    required
                    autocomplete="name"
                    placeholder="Tu nombre y apellidos"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>
                <div class="space-y-2">
                  <label for="telefono" class="block text-sm font-medium text-gray-700">Teléfono *</label>
                  <input
                    id="telefono"
                    name="telefono"
                    type="tel"
                    required
                    autocomplete="tel"
                    placeholder="Tu número de teléfono"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>
              </div>

              <div class="space-y-2">
                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  autocomplete="email"
                  placeholder="tu@email.com (opcional)"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <!-- Detalles del proyecto -->
              <div class="space-y-2">
                <label for="servicio" class="block text-sm font-medium text-gray-700">Tipo de servicio *</label>
                <select
                  id="servicio"
                  name="servicio"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                  <option value="">Selecciona el servicio que necesitas</option>
                  <option value="quitar-gotele">Quitar gotelé</option>
                  <option value="pintura-interior">Pintura interior</option>
                  <option value="pintura-exterior">Pintura exterior/fachada</option>
                  <option value="impermeabilizacion">Impermeabilización</option>
                  <option value="local-comercial">Local comercial</option>
                  <option value="comunidad">Comunidad de propietarios</option>
                  <option value="lacado">Lacado de puertas</option>
                  <option value="papel-pintado">Papel pintado/vinilos</option>
                  <option value="otro">Otro servicio</option>
                </select>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                  <label for="metros" class="block text-sm font-medium text-gray-700">Metros cuadrados (aprox.)</label>
                  <input
                    id="metros"
                    name="metros"
                    type="number"
                    placeholder="Ej: 80"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>
                <div class="space-y-2">
                  <label for="zona" class="block text-sm font-medium text-gray-700">Zona de Valencia</label>
                  <input
                    id="zona"
                    name="zona"
                    type="text"
                    autocomplete="address-level2"
                    placeholder="Ej: Russafa, Centro, Paterna..."
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>
              </div>

              <div class="space-y-2">
                <label for="descripcion" class="block text-sm font-medium text-gray-700">Describe tu proyecto *</label>
                <textarea
                  id="descripcion"
                  name="descripcion"
                  required
                  placeholder="Habitaciones a pintar, estado actual, colores, urgencia, etc."
                  rows="5"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                ></textarea>
              </div>

              <!-- Subida de fotos -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Subir fotos (opcional)</label>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                  <svg class="w-8 h-8 mx-auto mb-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                  </svg>
                  <p class="text-sm text-gray-500 mb-2">
                    Arrastra las fotos aquí o haz clic para seleccionar
                  </p>
                  <p class="text-xs text-gray-400">Formatos: JPG, PNG (máx. 5MB por foto)</p>
                  <input type="file" multiple accept="image/*" class="hidden" id="fotos" name="fotos">
                  <button type="button" onclick="document.getElementById('fotos').click()" 
                          class="mt-2 px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50">
                    Seleccionar fotos
                  </button>
                </div>
              </div>

              <!-- Consentimiento -->
              <div class="flex items-start space-x-2">
                <input
                  type="checkbox"
                  id="consentimiento"
                  name="consentimiento"
                  required
                  class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                />
                <label for="consentimiento" class="text-sm leading-relaxed text-gray-700">
                  Acepto el tratamiento de mis datos personales para recibir un presupuesto personalizado.
                  Consulta la 
                  <a href="/politica-privacidad" class="text-blue-600 hover:underline">
                    política de privacidad
                  </a>.
                </label>
              </div>
              <div id="consentimiento-error" class="text-sm text-red-600 hidden">
                Debes aceptar el tratamiento de datos personales.
              </div>

              <button 
                type="submit" 
                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium py-3 px-4 rounded-lg shadow-lg transition-all duration-300 transform hover:scale-105">
                Solicitar presupuesto gratuito
              </button>
            </form>
          </div>
        </div>

        <!-- Alternativa WhatsApp -->
        <div class="mt-6 bg-green-50 border border-green-200 rounded-lg">
          <div class="p-6">
            <div class="flex items-start space-x-4">
              <div class="p-3 bg-green-500 rounded-lg">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
              </div>
              <div class="flex-1">
                <h3 class="font-semibold mb-2">¿Prefieres WhatsApp?</h3>
                <p class="text-sm text-gray-600 mb-3">
                  Envíanos fotos y detalles directamente por WhatsApp para un presupuesto más rápido
                </p>
                <a
                  href="https://wa.me/34722208131?text=Hola,%20me%20gustaría%20solicitar%20un%20presupuesto%20de%20pintura"
                  class="inline-flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors"
                  aria-label="Abrir WhatsApp para solicitar presupuesto"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                  </svg>
                  <span>Enviar por WhatsApp</span>
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Proceso -->
        <div class="mt-8 text-center">
          <h3 class="text-lg font-semibold mb-4">¿Qué pasa después?</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm" role="list">
            <div class="p-4 bg-gray-50 rounded-lg" role="listitem">
              <div class="text-2xl mb-2">1️⃣</div>
              <h4 class="font-medium mb-1">Revisamos tu solicitud</h4>
              <p class="text-gray-600">Analizamos todos los detalles de tu proyecto</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg" role="listitem">
              <div class="text-2xl mb-2">2️⃣</div>
              <h4 class="font-medium mb-1">Te contactamos</h4>
              <p class="text-gray-600">En menos de 24h para aclarar dudas si es necesario</p>
            </div>
            <div class="p-4 bg-gray-50 rounded-lg" role="listitem">
              <div class="text-2xl mb-2">3️⃣</div>
              <h4 class="font-medium mb-1">Presupuesto detallado</h4>
              <p class="text-gray-600">Recibes el presupuesto completo sin compromiso</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('presupuestoForm')?.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Get form data
      const formData = new FormData(this);
      const data = Object.fromEntries(formData);
      
      // Simple validation
      const consentimientoError = document.getElementById('consentimiento-error');
      
      if (!data.nombre || !data.telefono || !data.servicio || !data.descripcion) {
        alert('Por favor, rellena todos los campos obligatorios.');
        return;
      }
      
      if (!data.consentimiento) {
        consentimientoError?.classList.remove('hidden');
        return;
      } else {
        consentimientoError?.classList.add('hidden');
      }
      
      // Show success message
      alert('¡Solicitud enviada! Te contactaremos en menos de 24 horas con tu presupuesto.');
      
      // Reset form
      this.reset();
      
      // Here you would typically send the data to your backend
      console.log('Form data:', data);
    });
  </script>
</Layout> 